#!/usr/bin/env bash

#
# This is intended to be run from within
# the development Docker container.
#

vol="$REPO_TMP"
base=$(eval echo "$REPO_HOME")

# Remove the source dir, if it exists.
[[ -d "$base" ]] && rm -rf $base;

# Exclude specific directories
rsync -av --delete \
    --exclude='.aqua' \
    --exclude='.docs' \
    --exclude='.git' \
    --exclude='.github' \
    --exclude='bin' \
    --exclude='.editorconfig' \
    --exclude='.gitignore' \
    --exclude='.golangci.yml' \
    --exclude='Dockerfile.arch' \
    --exclude='Justfile' \
    --exclude='LICENSE' \
    --exclude='aqua.yml' \
    --exclude='compose.yml' \
    --exclude='lefthook.yml' \
    "$vol/" "$base/" &> /dev/null
